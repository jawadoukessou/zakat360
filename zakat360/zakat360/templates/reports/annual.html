{% extends "base.html" %}

{% block title %}{{ _('Rapport Annuel') }} - Zakat360{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
<h1 class="h3"><i class="fas fa-file-alt me-2"></i>{{ _('Rapport Annuel') }}</h1>
        <div>
<a class="btn btn-outline-secondary" href="{{ url_for('reports.annual', year=year, format='csv') }}"><i class="fas fa-file-csv me-2"></i>{{ _('Exporter CSV') }}</a>
        </div>
    </div>
</div>

<form class="mb-3" method="GET" action="{{ url_for('reports.annual') }}">
    <div class="row g-2 align-items-end">
        <div class="col-md-3">
            <label class="form-label">Année</label>
            <input type="number" name="year" min="2000" max="2100" value="{{ year }}" class="form-control">
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" type="submit"><i class="fas fa-sync me-2"></i>Mettre à jour</button>
        </div>
    </div>
</form>

<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header bg-light"><strong>Dons par mois</strong></div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    {% for m in monthly %}
                    <li class="list-group-item d-flex justify-content-between">
                        <span>Mois {{ m.month }}</span>
                        <span>{{ m.total }} MAD</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
<div class="card-header bg-light"><strong>{{ _('Total par cause') }}</strong></div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    {% for c in by_cause %}
                    <li class="list-group-item d-flex justify-content-between">
                        <span>{{ c.cause }}</span>
                        <span>{{ c.total }} MAD</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}
